#!/bin/sh

# Load environment configuration
. /etc/profile.d/hugo.sh

opts=""

case "$1" in

    # Commands from hugo

    "benchmark")
        exec hugo-official $@
        ;;

    "config")
        exec hugo-official $@
        ;;

    "convert")
        exec hugo-official $@
        ;;

    "env")
        exec hugo-official $@
        ;;

    "gen")
        exec hugo-official $@
        ;;

    "help")
        exec hugo-official $@
        ;;

    "import")
        exec hugo-official $@
        ;;

    "list")
        exec hugo-official $@
        ;;

    "new")
        exec hugo-official $@
        ;;

    "serve")
        exec hugo-official $@ --bind=$HUGO_BIND
        ;;

    "server")
        exec hugo-official $@ --bind=$HUGO_BIND
        ;;

    "undraft")
        exec hugo-official $@
        ;;

    "version")
        exec hugo-official $@
        ;;

    "deploy")
        exec hugo-official $@
        ;;

    # Commands special to docker image

    "shell")
        exec bash -l
        ;;

    "build")
        test "$HUGO_DESTINATION" = "public" || opts="$opts --destination=${HUGO_DESTINATION}"
        test "$(id -u)" = "0" || opts="$opts --noTimes"

        shift
        exec hugo-official $@ $opts
        ;;
        

    # Default build command

    *)
        test "$HUGO_DESTINATION" = "public" || opts="$opts --destination=${HUGO_DESTINATION}"
        test "$(id -u)" = "0" || opts="$opts --noTimes"
        
        exec hugo-official $@ $opts
        ;;

esac
